{"ast":null,"code":"import{useEffect,useState}from\"react\";import\"./style.css\";// https://salahtml.uxper.co/home-chat-service.html\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const App=_ref=>{let{name}=_ref;const[isAnonymousUser,setIsAnonymousUser]=useState(false);useEffect(()=>{const isAnonymousUser=JSON.parse(localStorage.getItem(\"saturn_demo_is_anonymous_user\"));console.log({isAnonymousUser});setIsAnonymousUser(isAnonymousUser);},[]);useEffect(()=>{var _window,_window2,_window2$$saturn;const normalUser={uid:\"saturn-demo\",email:\"rohan+staurndemo@requestly.io\",name:\"Rohan\"};const anonymousUser={uid:\"anon-1234\"};const userData=isAnonymousUser?anonymousUser:normalUser;if((_window=window)!==null&&_window!==void 0&&_window.$saturn&&(_window2=window)!==null&&_window2!==void 0&&(_window2$$saturn=_window2.$saturn)!==null&&_window2$$saturn!==void 0&&_window2$$saturn.isLoaded){window.$saturn.setUser(userData.uid,{email:userData.email,name:userData.name});}else{window.addEventListener(\"saturn:ready\",function(){if(userData){window.$saturn.setUser(userData.uid,{email:userData.email,name:userData.name});}},{once:true});}},[isAnonymousUser]);const handleOnChange=e=>{var _window$$saturn;const value=e.target.value;const newValue=value===\"anon-1234\";localStorage.setItem(\"saturn_demo_is_anonymous_user\",JSON.stringify(newValue));setIsAnonymousUser(newValue);// window.location.reload();\n(_window$$saturn=window.$saturn)===null||_window$$saturn===void 0?void 0:_window$$saturn.reset();};return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsx(\"h1\",{style:{},children:\"Welcome to Saturn demo\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"legend\",{children:\"Select a user type:\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"normal\",name:\"user\",value:\"saturn-demo\",checked:!isAnonymousUser,onChange:handleOnChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"normal\",children:\"Normal user\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"anonymous\",name:\"user\",value:\"anon-1234\",checked:isAnonymousUser,onChange:handleOnChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"anonymous\",children:\"Anonymous user\"})]})]})})]});};","map":{"version":3,"names":["useEffect","useState","jsx","_jsx","jsxs","_jsxs","App","_ref","name","isAnonymousUser","setIsAnonymousUser","JSON","parse","localStorage","getItem","console","log","_window","_window2","_window2$$saturn","normalUser","uid","email","anonymousUser","userData","window","$saturn","isLoaded","setUser","addEventListener","once","handleOnChange","e","_window$$saturn","value","target","newValue","setItem","stringify","reset","style","display","alignItems","flexDirection","children","type","id","checked","onChange","htmlFor"],"sources":["/Users/rohanmathur/Desktop/stackblitz-starters-ymbulv/src/App.tsx"],"sourcesContent":["import { FC, useEffect, useState } from \"react\";\nimport \"./style.css\";\n\n// https://salahtml.uxper.co/home-chat-service.html\n\ntype UserType = \"anonymous\" | \"business\" | \"personal\";\n\nexport const App: FC<{ name: string }> = ({ name }) => {\n  const [isAnonymousUser, setIsAnonymousUser] = useState(false);\n\n  useEffect(() => {\n    const isAnonymousUser = JSON.parse(\n      localStorage.getItem(\"saturn_demo_is_anonymous_user\")\n    );\n\n    console.log({ isAnonymousUser });\n    setIsAnonymousUser(isAnonymousUser);\n  }, []);\n\n  useEffect(() => {\n    const normalUser = {\n      uid: \"saturn-demo\",\n      email: \"rohan+staurndemo@requestly.io\",\n      name: \"Rohan\",\n    };\n\n    const anonymousUser = {\n      uid: \"anon-1234\",\n    };\n\n    const userData = isAnonymousUser ? anonymousUser : normalUser;\n\n    if (window?.$saturn && window?.$saturn?.isLoaded) {\n      window.$saturn.setUser(userData.uid, {\n        email: userData.email,\n        name: userData.name,\n      });\n    } else {\n      window.addEventListener(\n        \"saturn:ready\",\n        function () {\n          if (userData) {\n            window.$saturn.setUser(userData.uid, {\n              email: userData.email,\n              name: userData.name,\n            });\n          }\n        },\n        { once: true }\n      );\n    }\n  }, [isAnonymousUser]);\n\n  const handleOnChange = (e) => {\n    const value = e.target.value;\n    const newValue = value === \"anon-1234\";\n    localStorage.setItem(\n      \"saturn_demo_is_anonymous_user\",\n      JSON.stringify(newValue)\n    );\n    setIsAnonymousUser(newValue);\n    // window.location.reload();\n    window.$saturn?.reset();\n  };\n\n  return (\n    <div\n      style={{ display: \"flex\", alignItems: \"center\", flexDirection: \"column\" }}\n    >\n      <h1 style={{}}>Welcome to Saturn demo</h1>\n      <div>\n        <fieldset>\n          <legend>Select a user type:</legend>\n\n          <div>\n            <input\n              type=\"radio\"\n              id=\"normal\"\n              name=\"user\"\n              value=\"saturn-demo\"\n              checked={!isAnonymousUser}\n              onChange={handleOnChange}\n            />\n            <label htmlFor=\"normal\">Normal user</label>\n          </div>\n\n          <div>\n            <input\n              type=\"radio\"\n              id=\"anonymous\"\n              name=\"user\"\n              value=\"anon-1234\"\n              checked={isAnonymousUser}\n              onChange={handleOnChange}\n            />\n            <label htmlFor=\"anonymous\">Anonymous user</label>\n          </div>\n        </fieldset>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}